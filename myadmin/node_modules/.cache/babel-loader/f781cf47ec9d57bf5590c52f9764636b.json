{"ast":null,"code":"import _defineProperty from \"/home/kim/Documents/react/avimar/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/kim/Documents/react/avimar/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/kim/Documents/react/avimar/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/kim/Documents/react/avimar/admin/src/pages/newProduct/NewProduct.jsx\";\nimport React from \"react\";\nimport { useState } from \"react\";\nimport \"./newProduct.css\";\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport app from \"../../firebase\";\nimport { addProduct } from \"../../redux/apiCalls\";\nimport { useDispatch } from \"react-redux\";\nexport default function NewProduct() {\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      inputs = _useState2[0],\n      setInputs = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      file = _useState4[0],\n      setFile = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      cat = _useState6[0],\n      setCat = _useState6[1];\n\n  var dispatch = useDispatch();\n\n  var handleChange = function handleChange(e) {\n    setInputs(function (prev) {\n      return _objectSpread({}, prev, _defineProperty({}, e.target.name, e.target.value));\n    });\n  };\n\n  var handleCat = function handleCat(e) {\n    setCat(e.target.value.split(\",\"));\n  };\n\n  var handleClick = function handleClick(e) {\n    e.preventDefault();\n    var fileName = new Date().getTime() + file.name;\n    var storage = getStorage(app);\n    var storageRef = ref(storage, fileName);\n    var uploadTask = uploadBytesResumable(storageRef, file); // Register three observers:\n    // 1. 'state_changed' observer, called any time the state changes\n    // 2. Error observer, called on failure\n    // 3. Completion observer, called on successful completion\n\n    uploadTask.on(\"state_changed\", function (snapshot) {\n      // Observe state change events such as progress, pause, and resume\n      // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n      var progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n      console.log(\"Upload is \" + progress + \"% done\");\n\n      switch (snapshot.state) {\n        case \"paused\":\n          console.log(\"Upload is paused\");\n          break;\n\n        case \"running\":\n          console.log(\"Upload is running\");\n          break;\n\n        default:\n      }\n    }, function (error) {// Handle unsuccessful uploads\n    }, function () {\n      // Handle successful uploads on complete\n      // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n      getDownloadURL(uploadTask.snapshot.ref).then(function (downloadURL) {\n        var product = _objectSpread({}, inputs, {\n          img: downloadURL,\n          categories: cat\n        });\n\n        addProduct(product, dispatch);\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newProduct\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"addProductTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, \"New Product\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"addProductForm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addProductItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, \"Image\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"file\",\n    onChange: function onChange(e) {\n      return setFile(e.target.files[0]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addProductItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"title\",\n    type: \"text\",\n    placeholder: \"Apple Airpods\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addProductItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"desc\",\n    type: \"text\",\n    placeholder: \"description\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addProductItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"price\",\n    type: \"number\",\n    placeholder: \"250\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addProductItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, \"Categories\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"furniture\",\n    onChange: handleCat,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addProductItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, \"Stock\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"inStock\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, \"Yes\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"false\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, \"No\"))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleClick,\n    className: \"addProductButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, \"Create\")));\n}","map":{"version":3,"names":["React","useState","getStorage","ref","uploadBytesResumable","getDownloadURL","app","addProduct","useDispatch","NewProduct","inputs","setInputs","file","setFile","cat","setCat","dispatch","handleChange","e","prev","target","name","value","handleCat","split","handleClick","preventDefault","fileName","Date","getTime","storage","storageRef","uploadTask","on","snapshot","progress","bytesTransferred","totalBytes","console","log","state","error","then","downloadURL","product","img","categories","files"],"sources":["/home/kim/Documents/react/avimar/admin/src/pages/newProduct/NewProduct.jsx"],"sourcesContent":["import React from \"react\";\nimport { useState } from \"react\";\nimport \"./newProduct.css\";\nimport {\n  getStorage,\n  ref,\n  uploadBytesResumable,\n  getDownloadURL,\n} from \"firebase/storage\";\nimport app from \"../../firebase\";\nimport { addProduct } from \"../../redux/apiCalls\";\nimport { useDispatch } from \"react-redux\";\n\nexport default function NewProduct() {\n  const [inputs, setInputs] = useState({});\n  const [file, setFile] = useState(\"\");\n  const [cat, setCat] = useState([]);\n  const dispatch = useDispatch();\n\n  const handleChange = (e) => {\n    setInputs((prev) => {\n      return { ...prev, [e.target.name]: e.target.value };\n    });\n  };\n  const handleCat = (e) => {\n    setCat(e.target.value.split(\",\"));\n  };\n\n  const handleClick = (e) => {\n    e.preventDefault();\n    const fileName = new Date().getTime() + file.name;\n    const storage = getStorage(app);\n    const storageRef = ref(storage, fileName);\n\n    const uploadTask = uploadBytesResumable(storageRef, file);\n\n    // Register three observers:\n    // 1. 'state_changed' observer, called any time the state changes\n    // 2. Error observer, called on failure\n    // 3. Completion observer, called on successful completion\n    uploadTask.on(\n      \"state_changed\",\n      (snapshot) => {\n        // Observe state change events such as progress, pause, and resume\n        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n        const progress =\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        console.log(\"Upload is \" + progress + \"% done\");\n        switch (snapshot.state) {\n          case \"paused\":\n            console.log(\"Upload is paused\");\n            break;\n          case \"running\":\n            console.log(\"Upload is running\");\n            break;\n          default:\n        }\n      },\n      (error) => {\n        // Handle unsuccessful uploads\n      },\n      () => {\n        // Handle successful uploads on complete\n        // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n        getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n          const product = { ...inputs, img: downloadURL, categories: cat };\n          addProduct(product, dispatch);\n        });\n      }\n    );\n  };\n\n  return (\n    <div className=\"newProduct\">\n      <h1 className=\"addProductTitle\">New Product</h1>\n      <form className=\"addProductForm\">\n        <div className=\"addProductItem\">\n          <label>Image</label>\n          <input\n            type=\"file\"\n            id=\"file\"\n            onChange={(e) => setFile(e.target.files[0])}\n          />\n        </div>\n        <div className=\"addProductItem\">\n          <label>Title</label>\n          <input\n            name=\"title\"\n            type=\"text\"\n            placeholder=\"Apple Airpods\"\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"addProductItem\">\n          <label>Description</label>\n          <input\n            name=\"desc\"\n            type=\"text\"\n            placeholder=\"description\"\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"addProductItem\">\n          <label>Price</label>\n          <input\n            name=\"price\"\n            type=\"number\"\n            placeholder=\"250\"\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"addProductItem\">\n          <label>Categories</label>\n          <input type=\"text\" placeholder=\"furniture\" onChange={handleCat} />\n        </div>\n        <div className=\"addProductItem\">\n          <label>Stock</label>\n          <select name=\"inStock\" onChange={handleChange}>\n            <option value=\"true\">Yes</option>\n            <option value=\"false\">No</option>\n          </select>\n        </div>\n        <button onClick={handleClick} className=\"addProductButton\">\n          Create\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}